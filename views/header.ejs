<!DOCTYPE html>
<html lang="zxx">

<head>
    <meta charset="UTF-8">
    <meta name="description" content="Male_Fashion Template">
    <meta name="keywords" content="Male_Fashion, unica, creative, html">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>DarwinTrade</title>

    <!-- Google Font -->
    <link href="https://fonts.googleapis.com/css2?family=Nunito+Sans:wght@300;400;600;700;800;900&display=swap"
        rel="stylesheet">
    <base href="/">
    <!-- Css Styles -->
    <link rel="stylesheet" href="/css/bootstrap.min.css" type="text/css">
    <link rel="stylesheet" href="/css/font-awesome.min.css" type="text/css">
    <link rel="stylesheet" href="/css/elegant-icons.css" type="text/css">
    <link rel="stylesheet" href="/css/magnific-popup.css" type="text/css">
    <link rel="stylesheet" href="/css/nice-select.css" type="text/css">
    <link rel="stylesheet" href="/css/owl.carousel.min.css" type="text/css">
    <link rel="stylesheet" href="/css/slicknav.min.css" type="text/css">
    <link rel="stylesheet" href="/css/style.css" type="text/css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.2.0/css/all.min.css"
        integrity="sha512-xh6O/CkQoPOWDdYTDqeRdPCVd1SpvCA9XXcUnZS2FmJNp1coAFzvtCN9BmamE+4aHK8yyUHUSCcJHgXloTyT2A=="
        crossorigin="anonymous" referrerpolicy="no-referrer" />
        <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
        <!-- Animate.css -->
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">



<script src="/socket.io/socket.io.js"></script>


</head>

<body>
    <!-- Page Preloder -->
    <div id="preloder">
        <div class="loader"></div>
    </div>

    <!-- Offcanvas Menu Begin -->
    <div class="offcanvas-menu-overlay"></div>
    <div class="offcanvas-menu-wrapper">
        <div class="offcanvas__option">
            <div class="offcanvas__links">
                <a href="#">Sign in</a>
                <a href="#">FAQs</a>
            </div>
            <div class="offcanvas__top__hover">
                <span>Usd <i class="arrow_carrot-down"></i></span>
                <ul>
                    <li>USD</li>
                    <li>EUR</li>
                    <li>USD</li>
                </ul>
            </div>
        </div>
        <div class="offcanvas__nav__option">
            <a href="#" class="search-switch"><img src="img/icon/search.png" alt=""></a>
            <a href="#"><img src="img/icon/heart.png" alt=""></a>
            <a href="#"><img src="img/icon/cart.png" alt=""> <span>0</span></a>
            <div class="price">$0.00</div>
        </div>
        <div id="mobile-menu-wrap"></div>
        <div class="offcanvas__text">
            <p>Free shipping, 30-day return or refund guarantee.</p>
        </div>
    </div>
    <!-- Offcanvas Menu End -->

    <!-- Header Section Begin -->
    <header class="header">
        <div class="container">
            <div class="row">
                <div class="col-lg-3 col-md-3">
                    <div class="header__logo">
                        <a href="">
                            <img src="img/logo.png" style="position: relative; left:-40px;" alt="">

                        </a>
                    </div>
                </div>
                <div class="col-lg-6 col-md-6">
                    <nav class="header__menu mobile-menu" style="margin-top: 30px;">
                        <ul>
                            <li class="active menu_toggler" data-filter="home"><a href="/home">Home</a></li>
                            <li class="menu_toggler" data-filter="shop"><a href="/shop">Shop</a></li>
                            <li class="menu_toggler" data-filter="cart"><a href="/cart">Cart</a></li>
                            <li class="menu_toggler" data-filter="about"><a href="/about">About</a></li>
                            <li class="menu_toggler" data-filter="contact"><a href="/contact">Contact</a></li>
                        </ul>
                    </nav>
                </div>
                <div class="col-lg-3 col-md-3">
                    <div class="header__nav__option" style="margin-top: 30px;">
                        <div class="user-icons">    
                        <a href="#" id="userIcon" data-bs-toggle="modal" data-bs-target="#exampleModal"><img src="img/icon/user.png"
                                height=27 width=25 style="margin-right: 5px;" alt=""></a>

                        <!-- Modal -->
                        <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel"
                            aria-hidden="true">
                            <div class="modal-dialog">
                                <div class="modal-content">
                                    <div class="modal-header">
                                        <h5 class="modal-title" id="exampleModalLabel">My Profile</h5>
                                    </div>
                                    <style>
                                        .card1 {
                                            width: 350px;
                                            background-color: #efefef;
                                            border: none;
                                            cursor: pointer;
                                            transition: all 0.5s;
                                        }

                                        .image img {
                                            transition: all 0.5s
                                        }

                                        .card:hover .image img {
                                            transform: scale(1.5)
                                        }

                                        .btn {
                                            height: 140px;
                                            width: 140px;
                                            border-radius: 50%
                                        }

                                        .name {
                                            font-size: 22px;
                                            font-weight: bold
                                        }

                                        .idd {
                                            font-size: 14px;
                                            font-weight: 600
                                        }

                                        .idd1 {
                                            font-size: 12px
                                        }

                                        .number {
                                            font-size: 22px;
                                            font-weight: bold
                                        }

                                        .follow {
                                            font-size: 12px;
                                            font-weight: 500;
                                            color: #444444
                                        }

                                        .btn1 {
                                            height: 40px;
                                            width: 150px;
                                            border: none;
                                            background-color: #000;
                                            color: #aeaeae;
                                            font-size: 15px
                                        }

                                        .text span {
                                            font-size: 13px;
                                            color: #545454;
                                            font-weight: 500
                                        }

                                        .icons i {
                                            font-size: 19px;
                                            padding-right: 10px;
                                        }

                                        hr .new1 {
                                            border: 1px solid
                                        }

                                        .join {
                                            font-size: 14px;
                                            color: #a0a0a0;
                                            font-weight: bold
                                        }

                                        .date {
                                            background-color: #ccc
                                        }
                                        .user-icons {
                                             display: flex;
                                             align-items: center;
                                        }
   
                                        .swal2-popup {
    width: 500px; /* Adjust the width of the modal */
    height: 200px;
    border-radius: 0; /* Adjust the height of the modal */
}
.swal2-title {
    text-align: center; 
    margin-top: 40px;
    color: #040404;
    font-family: "Nunito Sans", sans-serif;
    font-size: 27px;

}

.swal2-content {
    text-align: center; /* Align content text to the center */
}
.swal2-confirm {
     /* Button background color */
     /* Button text color */
    border: none; /* Remove button border */
    height: 40px;
    width: 100px;
    background-color: #000;
    color: #aeaeae;
    font-size: 15px;
    padding: 10px 20px; /* Add padding */
    cursor: pointer; /* Add pointer cursor */
}
/* CSS for display popup */
.custom-container {
    /* width: 50%; 
    height: auto;  */
    background-color: #fff; /* Background color */
    border-radius: 0; 
    /* Position fixed to keep it centered */

 
 
 
}
.custom-container .swal2-popup {
 
    width: 500px; /* Set width to full viewport width */
    height: auto; /* Set height to full viewport height */
    border-radius: 0; /* Adjust the height of the modal */
}
.custom-container .swal2-title {
    text-align: center; /* Align title text to the center */
    margin-top: 20px; /* Adjust margin-top */
    color: #040404; /* Title color */
    font-family: "Nunito Sans", sans-serif; /* Title font family */
    font-size: 27px; /* Title font size */
}

.custom-container .swal2-content {
    text-align: center; /* Align content text to the center */
    
}

.custom-container .swal2-confirm {
    background-color: #000; /* Button background color */
    color: #aeaeae; /* Button text color */
    border: none; /* Remove button border */
    height: 40px; /* Button height */
    width: 100px; /* Button width */
    font-size: 15px; /* Button font size */
    padding: 10px 20px; /* Button padding */
    cursor: pointer; /* Add pointer cursor */
}

#notificationCount {
    background-color: #4e4f50;
    color: white;
    font-size: 12px;
    padding: 4px 4px;
    border-radius: 50%;
    position: absolute;
    top: -6px;
    right: -10px;
    width: 17px; /* Ensure a fixed width for consistency */
    height: 17px; 
    text-align:center/* Ensure a fixed height for consistency */
    /* line-height: 18px; */
}
/* Bell icon */
#notificationBell {
    color: #4e4f50;
    font-size: 24px;
    margin-right: 30px;
    position: relative;
    cursor: pointer; 
}

/* Notification dropdown */
#notificationDropdown {
    /* border: 1px solid #ccc;
    border-radius: 4px; */
   
    margin-top: 4px;
    position:absolute;
 
    top: calc(50% + 20px); /* Position it just below the bell icon */
    right: -10px; /* Position it to the right of the bell icon */
    z-index: 1000; /* Ensure it appears above other elements */
    width: 400px;
    background-color:#f3f2ee;
    border: 1px solid #ccc;
    
}

/* Message item in dropdown */
.notification-item {
   
    /* border-radius: 4px; */
    font-family: "Nunito Sans", sans-serif;
    border: 7px solid white;
    /* margin-bottom: 4px; */
    background-color: #f3f2ee;
    color: black;
    text-align:center;
     padding: 3px; 
     box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

/* No notifications message */
.no-notifications {
    color: black;
}





</style>
                    
                      
                                      
                                    <div class="modal-body">
                                        <div class="container mt-4 mb-4 p-3 d-flex justify-content-center">
                                            <div class="card1 p-4">
                                                <div
                                                    class=" image d-flex flex-column justify-content-center align-items-center "  >
                                                    <button class="btn btn-secondary"> <img
                                                            src="<%= employee.thumbnail%>" height="100"
                                                            width="100" /></button> <span class="name mt-3">
                                                        <%= employee.name.first%>
                                                            <%= employee.name.last%>
                                                    </span> <span class="idd">
                                                        <%= employee.email%>
                                                    </span>
                                                    <div
                                                        class="d-flex flex-row justify-content-center align-items-center gap-2">
                                                        <span class="idd1">
                                                            <%= employee.employeeID%>
                                                        </span>
                                                    </div>
                                                    <div
                                                        class="d-flex flex-row justify-content-center align-items-center mt-3">
                                                        <strong><span class="number">
                                                                <%= employee.points %><span class="follow">
                                                                        Points</span>
                                                            </span></strong>
                                                    </div>
                                                    <div class=" d-flex mt-2"> <button class="btn1 btn-dark" onclick="window.location.href='/orders'">My Orders</button> </div>
                                                    <div class="text mt-3"> <span> <strong>Department:</strong>
                                                            <%= employee.department%>
                                                        </span> </div>
                                                        <div class="gap-3 mt-3 icons d-flex flex-row justify-content-center align-items-center"> <span><i
                                                            class="fa-brands fa-twitter"></i></span> <span><i class="fa-brands fa-facebook-f"></i></span> <span><i
                                                            class="fa-brands fa-instagram"></i></span> <span><i class="fa-brands fa-linkedin"></i></span> </div>

                                                    <div class=" px-2 rounded mt-4 date "> <span class="join">Joined
                                                            <% const dateString= employee.hiredOn
                                                            const date=new Date(dateString) 
                                                            const month=date.toLocaleString('en-US', {month:'long'})
                                                            const year=date.getFullYear(); %>
                                                            <%= month %>, <%= year %>
                                                        </span> </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>

                                </div>
                            </div>
                        </div>
               

                             <i id="notificationBell" class="fa-regular fa-bell" >
                                <span id="notificationCount" data-count="0"></span>
                            </i>
                            
                            <div class="dropdown-content" id="notificationDropdown" style="display: none;">
                                <ul id="notificationList">
                                    <!-- Notifications will be populated here -->
                                </ul>
                            </div>
                           

                            <a href="/wishlist" ><img src="img/icon/heart.png" height="20" width="20" style="margin-right: 5px;" alt=""><span></span></a>
                            <a href="/checkout"><img src="img/icon/co.png" height="25" width="25" style="margin-right: 5px;" alt=""><span></span></a>
                            <a href="/logout"><img src="img/icon/logout.png" height="20" width="17" style="margin-right: 5px;" alt=""><span></span></a>
                        
                        
                        <% if(employee.roles.includes('admin')) {%>
                            <a href="/admin"><img src="img/icon/slider-icon.png"
                                class='text-black' height=20 width=17 style="margin-right: 5px;" alt=""> <span></span></a>
                        <%}%>
                    </div>


                        <script>
                        document.getElementById('userIcon').addEventListener('click', function(event) {
                            event.preventDefault();
                            $('#exampleModal').modal('show'); // Show the modal
                        });


                        </script>
                    </div>
                </div>
            </div>
            <div class="canvas__open"><i class="fa fa-bars"></i></div>
        </div>
    </header>

    <script>
         const socket = io(); 
         const notificationCountSpan = document.getElementById('notificationCount');
         notificationCountSpan.style.display = 'none';
    
       
        socket.on('connect', () => {
            console.log('Connected to Socket.IO server');
        }); 
      


socket.on('new-product', (data) => {
    const notificationBell = document.getElementById('notificationBell');
    const notificationCountSpan = document.getElementById('notificationCount');
    const notificationDropdown = document.getElementById('notificationDropdown');
    const notificationList = document.getElementById('notificationList');

    function updateNotificationCount(count) {
        if (count === 0) {
            notificationCountSpan.style.display = 'none'; 
        } else {
            notificationCountSpan.textContent = count;
            notificationCountSpan.style.display = 'block'; 
        }
    }


    const currentCount = parseInt(notificationCountSpan.dataset.count) + 1;
    notificationCountSpan.dataset.count = currentCount;
    updateNotificationCount(currentCount);

 
    const listItem = document.createElement('ul');
    listItem.textContent = data.message;
    listItem.className = 'notification-item'; 
    notificationList.appendChild(listItem);

});


notificationBell.addEventListener('click', () => {
    const notificationDropdown = document.getElementById('notificationDropdown');
    const notificationCountSpan = document.getElementById('notificationCount');
    if (notificationCountSpan.dataset.count === '0') {
            const listItem = document.createElement('ul');
            listItem.textContent = 'No notifications yet!';
            listItem.className = 'notification-item'; 
            notificationList.appendChild(listItem);
        }

    if (notificationDropdown.style.display === 'block') {
        notificationDropdown.style.display = 'none';
        notificationList.innerHTML=''
    } else {
        notificationDropdown.style.display = 'block';
        notificationCountSpan.style.display = 'none';
    }
});


    </script>
    <!-- Header Section End -->     